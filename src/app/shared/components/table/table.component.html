<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th *ngFor="let col of columns" scope="col" class="header-cell" (click)="sort(col)"
                    [class.sortable]="col.sortable">
                    <div class="header-content">
                        {{ col.label }}
                        <span *ngIf="col.sortable" class="sort-icon">
                            <svg *ngIf="sortColumn !== col.key" xmlns="http://www.w3.org/2000/svg" width="12"
                                height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <polyline points="19 12 12 19 5 12"></polyline>
                            </svg>
                            <svg *ngIf="sortColumn === col.key && sortDirection === 'asc'"
                                xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="18 15 12 9 6 15"></polyline>
                            </svg>
                            <svg *ngIf="sortColumn === col.key && sortDirection === 'desc'"
                                xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </span>
                    </div>
                </th>
                <th *ngIf="actions.length > 0" scope="col" class="header-cell">
                    Acciones
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let row of displayData" class="table-row">
                <td *ngFor="let col of columns" class="table-cell">
                    <ng-container [ngSwitch]="col.type">
                        <span *ngSwitchCase="'date'">{{ getCellValue(row, col) | date:'short' }}</span>
                        <span *ngSwitchCase="'currency'">{{ getCellValue(row, col) | currency }}</span>
                        <span *ngSwitchDefault>{{ getCellValue(row, col) }}</span>
                    </ng-container>
                </td>
                <td *ngIf="actions.length > 0" class="table-cell actions-cell">
                    <button *ngFor="let action of actions" (click)="emitAction(action.name, row)" class="action-btn"
                        [ngClass]="action.class">
                        {{ action.label }}
                    </button>
                </td>
            </tr>
            <tr *ngIf="displayData.length === 0">
                <td [attr.colspan]="columns.length + (actions.length > 0 ? 1 : 0)" class="empty-state">
                    No hay datos disponibles.
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Pagination -->
    <nav class="pagination-container" aria-label="Table navigation">
        <span class="pagination-info">
            Mostrando <strong>{{ (currentPage - 1) * pageSize + 1 }}</strong>
            - <strong>{{ Math.min(currentPage * pageSize, data.length) }}</strong>
            de <strong>{{ data.length }}</strong>
        </span>
        <div class="pagination-controls">
            <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1" class="page-btn prev">
                Anterior
            </button>
            <span class="page-indicator">
                {{ currentPage }} / {{ totalPages }}
            </span>
            <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages" class="page-btn next">
                Siguiente
            </button>
        </div>
    </nav>
</div>