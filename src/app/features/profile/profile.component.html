<div class="profile-container">
    @if (usuario) {
    <div class="profile-card">
        <div class="profile-header">
            <button class="back-btn" (click)="goBack()">
                <span class="material-icons">arrow_back</span>
            </button>
            <div class="profile-avatar editable" (click)="openUploadModal()" title="Cambiar foto">
                @if (usuario.fotoPerfil) {
                <img [src]="usuario.fotoPerfil" [alt]="usuario.nombre" class="avatar-img">
                } @else {
                <span class="material-icons">person</span>
                }
                <div class="edit-overlay">
                    <span class="material-icons">camera_alt</span>
                </div>
            </div>

            <h1 class="profile-name">{{ usuario.apellido || '-' }}, {{ usuario.nombre || '-' }}</h1>
            <p class="profile-role">{{ usuario.rol || '-' }}</p>


        </div>

        <div class="profile-content">
            <h3 class="section-title">Información Personal</h3>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">DNI / Documento</span>
                    <span class="info-value">{{ usuario.dni || '-' }} ({{ usuario.tipoDocumento || '-' }})</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Email</span>
                    <span class="info-value">{{ usuario.mail || '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Fecha de Nacimiento</span>
                    <span class="info-value">{{ usuario.fechaNacimiento || '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Género</span>
                    <span class="info-value">{{ usuario.genero || '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Teléfono</span>
                    <span class="info-value">{{ usuario.telefono || '-' }}</span>
                </div>
            </div>

            <h3 class="section-title">Información Académica</h3>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">Legajo</span>
                    <span class="info-value">{{ usuario.legajo || '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Fecha de Ingreso</span>
                    <span class="info-value">{{ usuario.fechaIngreso || '-' }}</span>
                </div>
            </div>

            <h3 class="section-title">Dirección</h3>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">Calle y Número</span>
                    <span class="info-value">{{ usuario.direccion || '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Ciudad</span>
                    <span class="info-value">{{ usuario.ciudad || '-' }}</span>
                </div>
            </div>

            <div class="profile-actions">
                <button class="btn-edit" (click)="navigateToEdit()">
                    <span class="material-icons">edit</span>
                    Editar Perfil
                </button>
            </div>
        </div>
    </div>
    } @else {
    <div class="loading-state">
        <p>Cargando perfil...</p>
    </div>
    }
    @if (showUploadModal) {
    <app-upload-modal [isUploading]="isUploadingPhoto" (closeParams)="closeUploadModal()"
        (imageCropped)="handlePhotoUpload($event)">
    </app-upload-modal>
    }
</div>