<div class="dashboard-container">
    <app-alert-message *ngIf="successMessage" type="success" [message]="successMessage" (close)="successMessage = null">
    </app-alert-message>

    <main class="dashboard-content">
        <div class="welcome-header">
            <div class="header-text">
                <h1>{{ greeting }}, <span class="highlight">{{ usuario?.nombre }}</span></h1>
                @if (usuario?.rol === 'ESTUDIANTE' && usuario?.carreras?.length) {
                <p class="subtitle">{{ usuario?.carreras?.[0]?.nombreCarrera }} (Plan {{
                    usuario?.carreras?.[0]?.anioPlan }})</p>
                } @else if (usuario?.rol === 'PROFESOR') {
                <p class="subtitle">{{ usuario?.tituloAcademico || 'Docente' }}</p>
                } @else {
                <p class="subtitle">Panel de Administraci칩n</p>
                }
            </div>

            <div class="user-info-pill">
                <span class="role-badge">{{ usuario?.rol }}</span>
                <span class="divider">|</span>
                <span>Legajo: {{ usuario?.legajo }}</span>
            </div>
        </div>

        <div class="sections-container">
            @if (usuario?.rol === 'ESTUDIANTE') {
            @for (section of menuSections; track section.title) {
            <section class="dashboard-section">
                <h2 class="section-title">{{ section.title }}</h2>
                <div class="options-grid">
                    @for (option of section.options; track option.title) {
                    <div class="option-card" tabindex="0" [routerLink]="option.route">
                        <div class="icon-wrapper">
                            <span class="material-icons">{{ option.icon }}</span>
                            @if (option.badgeCount && option.badgeCount > 0) {
                            <span class="badge">{{ option.badgeCount }}</span>
                            }
                        </div>
                        <span class="option-title">{{ option.title }}</span>
                        <div class="card-hover-effect"></div>
                    </div>
                    }
                </div>
            </section>
            }
            } @else if (usuario?.rol === 'ADMIN') {
            @for (section of adminSections; track section.title) {
            <section class="dashboard-section">
                <h2 class="section-title">{{ section.title }}</h2>
                <div class="options-grid">
                    @for (option of section.options; track option.title) {
                    <div class="option-card" tabindex="0" [class.disabled]="option.disabled"
                        [routerLink]="option.disabled ? null : option.route">
                        <div class="icon-wrapper">
                            <span class="material-icons">{{ option.icon }}</span>
                            @if (option.badgeCount && option.badgeCount > 0) {
                            <span class="badge">{{ option.badgeCount }}</span>
                            }
                        </div>
                        <span class="option-title">{{ option.title }}</span>
                        <div class="card-hover-effect"></div>
                    </div>
                    }
                </div>
            </section>
            }
            } @else if (usuario?.rol === 'PROFESOR') {
            @for (section of professorSections; track section.title) {
            <section class="dashboard-section">
                <h2 class="section-title">{{ section.title }}</h2>
                <div class="options-grid">
                    @for (option of section.options; track option.title) {
                    <div class="option-card" tabindex="0" [class.disabled]="option.disabled"
                        [routerLink]="option.disabled ? null : option.route">
                        <div class="icon-wrapper">
                            <span class="material-icons">{{ option.icon }}</span>
                            @if (option.badgeCount && option.badgeCount > 0) {
                            <span class="badge">{{ option.badgeCount }}</span>
                            }
                        </div>
                        <span class="option-title">{{ option.title }}</span>
                        <div class="card-hover-effect"></div>
                    </div>
                    }
                </div>
            </section>
            }
            } @else {
            <div class="empty-state">
                <h3>Panel de {{ usuario?.rol | titlecase }} en Construcci칩n 游뚾</h3>
                <p>Pr칩ximamente ver치s aqu칤 las opciones para tu rol.</p>
            </div>
            }
        </div>
    </main>
</div>