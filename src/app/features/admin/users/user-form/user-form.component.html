<app-page-layout [title]="isEditMode ? 'Editar Usuario' : 'Crear Usuario'">
    <div class="form-container">
        <div class="form-card">
            <form (ngSubmit)="onSubmit()" #userForm="ngForm">

                <div class="form-grid">
                    <!-- Personal Info -->
                    <div class="form-group">
                        <label>Nombre <span class="required">*</span></label>
                        <input type="text" class="form-control" [(ngModel)]="usuario.nombre" name="nombre" required>
                    </div>

                    <div class="form-group">
                        <label>Apellido <span class="required">*</span></label>
                        <input type="text" class="form-control" [(ngModel)]="usuario.apellido" name="apellido" required>
                    </div>

                    <div class="form-group">
                        <label>DNI <span class="required">*</span></label>
                        <input type="text" class="form-control" [(ngModel)]="usuario.dni" name="dni" required
                            [disabled]="isEditMode">
                    </div>

                    <div class="form-group">
                        <label>Tipo Documento <span class="required">*</span></label>
                        <select class="form-select" [(ngModel)]="usuario.tipoDocumento" name="tipoDocumento" required>
                            @for(tipo of tiposDocumento; track tipo) {
                            <option [value]="tipo">{{ tipo }}</option>
                            }
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Email <span class="required">*</span></label>
                        <input type="email" class="form-control" [(ngModel)]="usuario.mail" name="mail" required>
                    </div>

                    <div class="form-group">
                        <label>Teléfono</label>
                        <input type="text" class="form-control" [(ngModel)]="usuario.telefono" name="telefono">
                    </div>

                    <!-- Role & Academic -->
                    <div class="form-group">
                        <label>Rol <span class="required">*</span></label>
                        <select class="form-select" [(ngModel)]="usuario.rol" name="rol" required>
                            @for(rol of roles; track rol) {
                            <option [value]="rol">{{ rol }}</option>
                            }
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Legajo</label>
                        <input type="text" class="form-control" [(ngModel)]="usuario.legajo" name="legajo">
                    </div>

                    <!-- Address -->
                    <div class="form-group full-width">
                        <label>Dirección</label>
                        <input type="text" class="form-control" [(ngModel)]="usuario.direccion" name="direccion">
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn-cancel" (click)="cancel()">Cancelar</button>
                    <button type="submit" class="btn-submit" [disabled]="userForm.invalid || isLoading">
                        @if (isLoading) {
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                        Guardando...
                        } @else {
                        Guardar
                        }
                    </button>
                </div>

            </form>
        </div>
    </div>
</app-page-layout>